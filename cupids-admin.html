<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†ç”»é¢ - ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒã‚º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
            background: #F5F5F5;
            min-height: 100vh;
            padding-bottom: 20px;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: linear-gradient(to right, #ec4899, #a855f7);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .logout-button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-button:hover {
            background: rgba(255,255,255,0.3);
        }

        /* ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }

        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ« */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: #f9fafb;
            padding: 12px;
            text-align: left;
            font-size: 14px;
            color: #666;
            font-weight: 600;
            border-bottom: 2px solid #e5e7eb;
        }

        .table td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
            color: #333;
        }

        .table tr:hover {
            background: #f9fafb;
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        /* æ“ä½œãƒœã‚¿ãƒ³ */
        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-danger {
            background: #EF4444;
            color: white;
        }

        .btn-danger:hover {
            background: #DC2626;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .star-display {
            color: #FFB800;
            font-size: 16px;
        }

        .fixed-badge {
            display: inline-block;
            padding: 2px 8px;
            background: #FEF3C7;
            color: #92400E;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 6px;
        }

        /* å ã„å¸«ã‚«ãƒ¼ãƒ‰ - ã‚¹ãƒãƒ›å¯¾å¿œ */
        .fortunetellers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .ft-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .ft-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .ft-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .ft-card-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }

        .ft-card-email {
            font-size: 13px;
            color: #666;
        }

        .ft-card-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .ft-card-status.active {
            background: #DEF7EC;
            color: #03543F;
        }

        .ft-card-status.inactive {
            background: #FEE2E2;
            color: #991B1B;
        }

        .ft-card-info {
            margin: 15px 0;
            padding: 15px 0;
            border-top: 1px solid #f3f4f6;
            border-bottom: 1px solid #f3f4f6;
        }

        .ft-card-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .ft-card-info-row:last-child {
            margin-bottom: 0;
        }

        .ft-card-info-label {
            font-size: 13px;
            color: #666;
        }

        .ft-card-info-value {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .ft-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        /* PCè¡¨ç¤ºæ™‚ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«æˆ»ã™ */
        @media (min-width: 1024px) {
            .fortunetellers-grid {
                display: none;
            }
            .table-wrapper {
                display: block;
            }
        }

        /* ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆè¡¨ç¤ºæ™‚ã¯ã‚«ãƒ¼ãƒ‰ã« */
        @media (max-width: 1023px) {
            .fortunetellers-grid {
                display: grid;
            }
            .table-wrapper {
                display: none;
            }
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ  */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .form-group small {
            display: block;
            margin-top: 4px;
        }

        /* ãƒ©ãƒ³ã‚­ãƒ³ã‚° */
        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ranking-item {
            background: #f9fafb;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s;
        }

        .ranking-item:hover {
            background: #f3f4f6;
            transform: translateX(5px);
        }

        .ranking-medal {
            font-size: 32px;
            min-width: 40px;
            text-align: center;
        }

        .ranking-number {
            font-size: 20px;
            font-weight: bold;
            color: #666;
            min-width: 40px;
            text-align: center;
        }

        .ranking-info {
            flex: 1;
        }

        .ranking-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }

        .ranking-email {
            font-size: 12px;
            color: #666;
        }

        .ranking-sales {
            text-align: right;
        }

        .ranking-amount {
            font-size: 20px;
            font-weight: bold;
            color: #10b981;
        }

        .ranking-commission {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä»˜ããƒ†ãƒ¼ãƒ–ãƒ«å…±é€šãƒ©ãƒƒãƒ‘ãƒ¼ */
        .users-table-wrapper,
        .ft-table-wrapper,
        .reviews-table-wrapper {
            max-height: 280px; /* ãŠãŠã‚ˆã 5è¡Œã¶ã‚“ï¼ˆå ã„å¸«ã¯3ã€œ4è¡Œè¡¨ç¤ºã«ãªã‚‹ãã‚‰ã„ï¼‰ */
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }

        .users-table-wrapper::-webkit-scrollbar,
        .ft-table-wrapper::-webkit-scrollbar,
        .reviews-table-wrapper::-webkit-scrollbar {
            width: 8px;
        }

        .users-table-wrapper::-webkit-scrollbar-track,
        .ft-table-wrapper::-webkit-scrollbar-track,
        .reviews-table-wrapper::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .users-table-wrapper::-webkit-scrollbar-thumb,
        .ft-table-wrapper::-webkit-scrollbar-thumb,
        .reviews-table-wrapper::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 20px;
            color: #333;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #666;
        }

        .modal-body {
            padding: 20px;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-control:focus {
            outline: none;
            border-color: #3b82f6;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <div class="header-content">
            <div class="header-title">ğŸ”§ ç®¡ç†ç”»é¢</div>
            <button class="logout-button" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </div>

    <div class="container">
        <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</div>
                <div class="stat-value" id="totalUsers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">å ã„å¸«æ•°</div>
                <div class="stat-value" id="totalFortuneTellers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ä»Šæœˆã®ç·å£²ä¸Š</div>
                <div class="stat-value" id="monthlyRevenue">Â¥0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ä»Šæœˆã®åˆ©ç›Š</div>
                <div class="stat-value" id="monthlyProfit">Â¥0</div>
            </div>
        </div>

        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ -->
        <div class="section" id="section-users">
            <div class="section-title">ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</div>
            <div class="users-table-wrapper">
                <table class="table">
                    <thead>
                        <tr>
                            <th>åå‰</th>
                            <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                            <th>ã‚¿ã‚¤ãƒ—</th>
                            <th>ãƒã‚¤ãƒ³ãƒˆ</th>
                            <th>ç™»éŒ²æ—¥</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="usersList">
                        <tr><td colspan="6" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å ã„å¸«ä¸€è¦§ -->
        <div class="section" id="section-fortune-tellers">
            <div class="section-title">ğŸ”® å ã„å¸«ä¸€è¦§</div>
            
            <!-- PCç”¨ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º -->
            <div class="table-wrapper">
                <div class="ft-table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>åå‰</th>
                                <th>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                                <th>å°‚é–€åˆ†é‡</th>
                                <th>æ–™é‡‘</th>
                                <th>è©•ä¾¡</th>
                                <th>å ±é…¬ç‡</th>
                                <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                                <th>é‘‘å®šä¸­ãƒ€ãƒŸãƒ¼</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="fortunetellersList">
                            <tr><td colspan="9" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç”¨ã‚«ãƒ¼ãƒ‰è¡¨ç¤º -->
            <div class="fortunetellers-grid" id="fortunetellersGrid">
                <div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>

        <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼ç®¡ç† -->
        <div class="section" id="section-reviews">
            <div class="section-title">â­ ãƒ¬ãƒ“ãƒ¥ãƒ¼ç®¡ç†
                <button class="btn btn-primary" onclick="showAddReviewModal()" style="float: right; padding: 8px 16px; font-size: 14px;">
                    â• ãƒ¬ãƒ“ãƒ¥ãƒ¼è¿½åŠ 
                </button>
            </div>
            <div class="reviews-table-wrapper">
                <table class="table">
                    <thead>
                        <tr>
                            <th>å ã„å¸«</th>
                            <th>ãŠå®¢æ§˜</th>
                            <th>è©•ä¾¡</th>
                            <th>ã‚³ãƒ¡ãƒ³ãƒˆ</th>
                            <th>æŠ•ç¨¿æ—¥</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="reviewsList">
                        <tr><td colspan="6" class="loading">èª­ã¿è¾¼ã¿ä¸­...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å ã„å¸«å£²ä¸Šãƒ©ãƒ³ã‚­ãƒ³ã‚° -->
        <div class="section" id="section-ranking">
            <div class="section-title">ğŸ† ä»Šæœˆã®å£²ä¸Šãƒ©ãƒ³ã‚­ãƒ³ã‚°</div>
            <div class="ranking-list" id="rankingList">
                <div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>

        <!-- å ã„å¸«ç™»éŒ²ï¼ˆã„ã¡ã°ã‚“ä¸‹ï¼‰ -->
        <div class="section" id="section-register">
            <div class="section-title">â• å ã„å¸«ã‚’ç™»éŒ²</div>
            <form id="addFortuneTellerForm" style="max-width: 600px;">
                <div class="form-row">
                    <div class="form-group">
                        <label>å ã„å¸«å *</label>
                        <input type="text" id="ftName" required>
                    </div>
                    <div class="form-group">
                        <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
                        <input type="email" id="ftEmail" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ *</label>
                        <input type="text" id="ftPassword" value="cupids123" required>
                        <small style="color: #666; font-size: 12px;">å¾Œã§å¤‰æ›´ã§ãã¾ã™</small>
                    </div>
                    <div class="form-group">
                        <label>1æ–‡å­—ã‚ãŸã‚Šã®æ–™é‡‘ï¼ˆptï¼‰ *</label>
                        <input type="number" id="ftPrice" min="1" value="10" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>è‡ªå·±ç´¹ä»‹ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ *</label>
                    <textarea id="ftMessage" rows="4" required placeholder="ãŠå®¢æ§˜ã«å‘ã‘ãŸè‡ªå·±ç´¹ä»‹æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                </div>

                <div class="form-group">
                    <label>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ</label>
                    <input type="file" id="ftImage" accept="image/*">
                    <small style="color: #666; font-size: 12px; display: block; margin-top: 4px;">
                        â€» ç”»åƒã¯å††å½¢ã«ãƒˆãƒªãƒŸãƒ³ã‚°ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚
                    </small>
                    <div id="imagePreview" style="margin-top: 15px; display: none;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">
                            ğŸ“· ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå®Ÿéš›ã®è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
                        </div>
                        <!-- å††ã®ã‚µã‚¤ã‚ºèª¿æ•´ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ -->
                        <div style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                            <label style="font-size: 12px; color: #666; font-weight: 600; white-space: nowrap;">å††ã®ã‚µã‚¤ã‚º:</label>
                            <input type="range" id="circleSize" min="20" max="50" value="35" step="1" style="flex: 1; max-width: 200px;">
                            <span id="circleSizeValue" style="font-size: 12px; color: #666; font-weight: 600; min-width: 40px;">35%</span>
                        </div>
                        <!-- ç”»åƒä½ç½®èª¿æ•´ -->
                        <div style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                            <label style="font-size: 12px; color: #666; font-weight: 600; white-space: nowrap;">ç”»åƒä½ç½®:</label>
                            <button type="button" onclick="moveImage('up')" style="padding: 4px 8px; font-size: 12px;">â†‘</button>
                            <button type="button" onclick="moveImage('down')" style="padding: 4px 8px; font-size: 12px;">â†“</button>
                            <button type="button" onclick="moveImage('left')" style="padding: 4px 8px; font-size: 12px;">â†</button>
                            <button type="button" onclick="moveImage('right')" style="padding: 4px 8px; font-size: 12px;">â†’</button>
                            <button type="button" onclick="resetImagePosition()" style="padding: 4px 8px; font-size: 12px;">ãƒªã‚»ãƒƒãƒˆ</button>
                        </div>
                        <!-- ç”»åƒã‚µã‚¤ã‚ºèª¿æ•´ -->
                        <div style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                            <label style="font-size: 12px; color: #666; font-weight: 600; white-space: nowrap;">ç”»åƒã‚µã‚¤ã‚º:</label>
                            <input type="range" id="imageScale" min="50" max="200" value="100" step="5" style="flex: 1; max-width: 200px;">
                            <span id="imageScaleValue" style="font-size: 12px; color: #666; font-weight: 600; min-width: 45px;">100%</span>
                        </div>
                        <div style="position: relative; display: inline-block; overflow: hidden; border-radius: 10px; width: 200px; height: 200px; background: #f0f0f0;">
                            <img id="previewImg" 
                                 style="position: absolute; width: 100%; height: auto; top: 0; left: 0; cursor: move;" 
                                 alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"
                                 draggable="true">
                            <!-- å††å½¢ã‚¬ã‚¤ãƒ‰ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
                            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                                <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0;">
                                    <!-- åŠé€æ˜ã®æš—ã„èƒŒæ™¯ -->
                                    <rect width="100%" height="100%" fill="rgba(0,0,0,0.3)"/>
                                    <!-- ä¸­å¤®ã®å††å½¢ã‚«ãƒƒãƒˆã‚¢ã‚¦ãƒˆï¼ˆãƒã‚¹ã‚¯ã¨ã—ã¦é€æ˜ã«ï¼‰ -->
                                    <mask id="circleMask">
                                        <rect width="100%" height="100%" fill="white"/>
                                        <circle id="previewCircleFill" cx="50%" cy="50%" r="35%" fill="black"/>
                                    </mask>
                                    <rect width="100%" height="100%" fill="rgba(0,0,0,0.5)" mask="url(#circleMask)"/>
                                    <!-- å††å½¢ã®æ ç·š -->
                                    <circle id="previewCircleStroke" cx="50%" cy="50%" r="35%" fill="none" stroke="#EC4899" stroke-width="3" stroke-dasharray="5,5"/>
                                </svg>
                            </div>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">
                            ğŸ’¡ çŸ¢å°ãƒœã‚¿ãƒ³ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°ã§ç”»åƒã®ä½ç½®ã‚’èª¿æ•´ã§ãã¾ã™
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 16px;">
                    å ã„å¸«ã‚’ç™»éŒ²
                </button>
            </form>
        </div>

    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, getDocs, doc, getDoc, setDoc, updateDoc, deleteDoc, query, where, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        const firebaseConfig = {
            apiKey: "AIzaSyA52uJ31HzLkbz32lA-3WWSmhM10xYjjCg",
            authDomain: "cupids-chat.firebaseapp.com",
            projectId: "cupids-chat",
            storageBucket: "cupids-chat.firebasestorage.app",
            messagingSenderId: "44532110483",
            appId: "1:44532110483:web:d6266e8abba8582b8b6966"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        
        // ç®¡ç†è€…èªè¨¼
        signInWithEmailAndPassword(auth, 'admin@cupids-chat.com', 'memetan1031admin')
            .then(() => console.log('âœ… ç®¡ç†è€…èªè¨¼æˆåŠŸ'))
            .catch(error => {
                if (error.code === 'auth/user-not-found') {
                    createUserWithEmailAndPassword(auth, 'admin@cupids-chat.com', 'memetan1031admin')
                        .then(() => console.log('âœ… ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ'))
                        .catch(e => console.error('ä½œæˆã‚¨ãƒ©ãƒ¼:', e));
                }
            });
        
        // ç®¡ç†è€…ã¨ã—ã¦è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³
        async function adminAutoLogin() {
            try {
                await signInWithEmailAndPassword(auth, 'admin@cupids-chat.com', 'memetan1031admin');
                console.log('âœ… ç®¡ç†è€…èªè¨¼æˆåŠŸ');
            } catch (error) {
                if (error.code === 'auth/user-not-found') {
                    try {
                        await createUserWithEmailAndPassword(auth, 'admin@cupids-chat.com', 'memetan1031admin');
                        console.log('âœ… ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå®Œäº†');
                    } catch (createError) {
                        console.error('ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã‚¨ãƒ©ãƒ¼:', createError);
                    }
                } else if (error.code === 'auth/invalid-credential') {
                    console.error('èªè¨¼æƒ…å ±ãŒç„¡åŠ¹ã§ã™');
                }
            }
        }
        
        window.firebaseAuth = auth;
        window.firebaseDB = db;
        window.firebaseStorage = storage;
        window.firebaseCreateUser = createUserWithEmailAndPassword;
        window.firebaseStorageRef = ref;
        window.firebaseUploadBytes = uploadBytes;
        window.firebaseGetDownloadURL = getDownloadURL;
        window.firebaseCollection = collection;
        window.firebaseGetDocs = getDocs;
        window.firebaseDoc = doc;
        window.firebaseGetDoc = getDoc;
        window.firebaseSetDoc = setDoc;
        window.firebaseUpdateDoc = updateDoc;
        window.firebaseDeleteDoc = deleteDoc;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
        window.firebaseOrderBy = orderBy;

        window.firebaseReady = true;
        window.dispatchEvent(new Event('firebaseReady'));
        console.log('âœ… FirebaseåˆæœŸåŒ–å®Œäº†!');
        
        setTimeout(() => {
            if (window.loadData && typeof window.loadData === 'function') {
                console.log('ğŸš€ loadDataå®Ÿè¡Œé–‹å§‹...');
                window.loadData();
            } else {
                console.error('âŒ loadDataé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }, 2000);
    </script>

    <script>
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒã‚§ãƒƒã‚¯
        const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
        if (!currentUser || currentUser.type !== 'admin') {
            alert('ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„');
            window.location.href = 'cupids-top.html';
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å®šç¾©ï¼‰
        window.loadData = async function() {
            if (!window.firebaseReady || !window.firebaseDB) {
                console.log('â³ FirebaseåˆæœŸåŒ–å¾…æ©Ÿä¸­...');
                setTimeout(loadData, 500);
                return;
            }
            
            console.log('ğŸ“Š ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–‹å§‹...');
            
            try {
                const usersSnapshot = await window.firebaseGetDocs(
                    window.firebaseCollection(window.firebaseDB, 'users')
                );
                
                const users = [];
                usersSnapshot.forEach(doc => {
                    users.push({ id: doc.id, ...doc.data() });
                });

                const fortuneTellersSnapshot = await window.firebaseGetDocs(
                    window.firebaseCollection(window.firebaseDB, 'fortuneTellers')
                );
                
                const fortuneTellers = [];
                fortuneTellersSnapshot.forEach(doc => {
                    fortuneTellers.push({ id: doc.id, ...doc.data() });
                });

                document.getElementById('totalUsers').textContent = users.length;
                document.getElementById('totalFortuneTellers').textContent = fortuneTellers.length;

                // ä»Šæœˆã®å£²ä¸Šã¨åˆ©ç›Š
                let monthlyRevenue = 0;
                let totalCommission = 0;
                
                fortuneTellers.forEach(ft => {
                    const revenue = ft.currentMonthRevenue || 0;
                    monthlyRevenue += revenue;
                    
                    let commissionRate;
                    if (ft.fixedCommissionRate) {
                        commissionRate = ft.fixedCommissionRate;
                    } else {
                        const previousRevenue = ft.previousMonthRevenue || 0;
                        if (previousRevenue >= 270000) {
                            commissionRate = 40;
                        } else if (previousRevenue >= 210000) {
                            commissionRate = 38;
                        } else if (previousRevenue >= 150000) {
                            commissionRate = 36;
                        } else if (previousRevenue >= 90000) {
                            commissionRate = 34;
                        } else if (previousRevenue >= 30000) {
                            commissionRate = 32;
                        } else {
                            commissionRate = 30;
                        }
                    }
                    totalCommission += revenue * (commissionRate / 100);
                });
                
                const monthlyProfit = monthlyRevenue - totalCommission;
                
                document.getElementById('monthlyRevenue').textContent = 'Â¥' + Math.floor(monthlyRevenue).toLocaleString();
                document.getElementById('monthlyProfit').textContent = 'Â¥' + Math.floor(monthlyProfit).toLocaleString();

                displayUsers(users);
                displayFortuneTellers(fortuneTellers);
                await loadReviews();
                displayRanking(fortuneTellers);

            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('totalUsers').textContent = '0';
                document.getElementById('totalFortuneTellers').textContent = '0';
                document.getElementById('monthlyRevenue').textContent = 'Â¥0';
                document.getElementById('monthlyProfit').textContent = 'Â¥0';
            }
        }

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤ºï¼ˆãƒ­ã‚°ã‚¤ãƒ³é † / ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
        function displayUsers(users) {
            const tbody = document.getElementById('usersList');
            
            if (users.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã¾ã›ã‚“</td></tr>';
                return;
            }

            // lastLoginAt ãŒã‚ã‚Œã°ãã‚Œã€ãªã‘ã‚Œã° createdAt ã§æ–°ã—ã„é †
            users.sort((a, b) => {
                const aTime = a.lastLoginAt
                    ? new Date(a.lastLoginAt).getTime()
                    : a.createdAt ? new Date(a.createdAt).getTime() : 0;
                const bTime = b.lastLoginAt
                    ? new Date(b.lastLoginAt).getTime()
                    : b.createdAt ? new Date(b.createdAt).getTime() : 0;
                return bTime - aTime;
            });

            tbody.innerHTML = '';
            users.forEach(user => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${user.name || '-'}</td>
                    <td>${user.email || '-'}</td>
                    <td>${user.type === 'client' ? 'ãŠå®¢æ§˜' : user.type}</td>
                    <td>${user.points || 0}pt</td>
                    <td>${user.createdAt ? new Date(user.createdAt).toLocaleDateString('ja-JP') : '-'}</td>
                    <td>
                        <button onclick="addPointsToUser('${user.id}', '${user.name || ''}')" 
                                style="background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">
                            â• ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // å ã„å¸«ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆå…ƒã®ãƒ­ã‚¸ãƒƒã‚¯ãã®ã¾ã¾ï¼‰
        function displayFortuneTellers(fortuneTellers) {
            const tbody = document.getElementById('fortunetellersList');
            const cardsGrid = document.getElementById('fortunetellersGrid');
            
            if (fortuneTellers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #999;">å ã„å¸«ãŒã„ã¾ã›ã‚“</td></tr>';
                cardsGrid.innerHTML = '<div class="loading">å ã„å¸«ãŒã„ã¾ã›ã‚“</div>';
                return;
            }

            tbody.innerHTML = '';
            fortuneTellers.forEach(ft => {
                const isNew = ft.isNew || false;
                const tr = document.createElement('tr');
                
                let statusText = 'ä¸æ˜';
                if (ft.status === 'available') statusText = 'âš¡ å¾…æ©Ÿä¸­';
                else if (ft.status === 'accepting') statusText = 'ğŸ“ å—ä»˜ä¸­';
                else if (ft.status === 'stopped') statusText = 'â¸ï¸ åœæ­¢ä¸­';

                const totalReviews = ft.totalReviews || 0;
                const baseReviewCount = ft.baseReviewCount || 0;

                const ratingDisplay = ft.ratingFixed 
                    ? `<span class="star-display">â­ ${ft.averageRating || 0}</span><span class="fixed-badge">ğŸ”’ å›ºå®š</span><br><button class="btn btn-sm btn-info" onclick="updateBaseReviewCount('${ft.id}', '${ft.name}')" style="margin-top: 5px;">é‘‘å®š ${totalReviews}ä»¶${baseReviewCount > 0 ? ' (åŸºæº–:' + baseReviewCount + ')' : ''}</button>` 
                    : `<span class="star-display">â­ ${ft.averageRating || 0}</span><br><button class="btn btn-sm btn-info" onclick="updateBaseReviewCount('${ft.id}', '${ft.name}')" style="margin-top: 5px;">é‘‘å®š ${totalReviews}ä»¶${baseReviewCount > 0 ? ' (åŸºæº–:' + baseReviewCount + ')' : ''}</button>`;

                let commissionRate;
                if (ft.fixedCommissionRate) {
                    commissionRate = ft.fixedCommissionRate;
                } else {
                    const previousRevenue = ft.previousMonthRevenue || 0;
                    if (previousRevenue >= 270000) {
                        commissionRate = 40;
                    } else if (previousRevenue >= 210000) {
                        commissionRate = 38;
                    } else if (previousRevenue >= 150000) {
                        commissionRate = 36;
                    } else if (previousRevenue >= 90000) {
                        commissionRate = 34;
                    } else if (previousRevenue >= 30000) {
                        commissionRate = 32;
                    } else {
                        commissionRate = 30;
                    }
                }
                
                const commissionDisplay = ft.fixedCommissionRate 
                    ? `<strong>${commissionRate}%</strong><span class="fixed-badge">ğŸ”’ å›ºå®š</span>` 
                    : `${commissionRate}%`;

                tr.innerHTML = `
                    <td>
                        ${isNew ? '<span style="background: #ff4444; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-right: 5px;">NEW</span>' : ''}
                        <strong>${ft.name || '-'}</strong>
                    </td>
                    <td style="font-size: 13px; color: #666;">${ft.email || '-'}</td>
                    <td style="font-size: 13px;">${ft.specialty || '-'}</td>
                    <td><strong>${ft.price || 10}pt</strong>/æ–‡å­—</td>
                    <td>${ratingDisplay}</td>
                    <td>${commissionDisplay}</td>
                    <td>${statusText}</td>
                    <td>
                        <button class="btn btn-primary" onclick="showDummyClientsModal('${ft.id}', '${ft.name || 'å ã„å¸«'}', ${ft.dummyActiveClients || 0})" style="font-size: 13px; padding: 6px 12px;">
                            ${ft.dummyActiveClients || 0}äºº
                        </button>
                    </td>
                    <td>
                        <div class="action-buttons" style="display: flex; flex-wrap: wrap; gap: 4px;">
                            <button class="btn ${isNew ? 'btn-secondary' : 'btn-danger'}" 
                                    onclick="toggleFortuneTellerNewMark('${ft.id}', ${!isNew})" 
                                    style="font-size: 12px; padding: 4px 8px; width: 100%;"
                                    title="${isNew ? 'NEWãƒãƒ¼ã‚¯ã‚’è§£é™¤' : 'NEWãƒãƒ¼ã‚¯ã‚’ä»˜ä¸'}">
                                ${isNew ? 'ğŸ·ï¸ NEWè§£é™¤' : 'ğŸ·ï¸ NEWä»˜ä¸'}
                            </button>
                            <button class="btn btn-primary" 
                                    onclick="editPrice('${ft.id}', '${ft.name}', ${ft.price || 10})" 
                                    style="font-size: 12px; padding: 4px 8px; width: 100%;"
                                    title="æ–™é‡‘ã‚’å¤‰æ›´">
                                ğŸ’° æ–™é‡‘å¤‰æ›´
                            </button>
                            <button class="btn ${ft.isDummy ? 'btn-success' : 'btn-secondary'}" 
                                    onclick="toggleDummy('${ft.id}', ${!!ft.isDummy})" 
                                    style="font-size: 12px; padding: 4px 8px;"
                                    title="${ft.isDummy ? 'ãƒ€ãƒŸãƒ¼å ã„å¸«ã§ã™' : 'ãƒ€ãƒŸãƒ¼ã«è¨­å®š'}">
                                ${ft.isDummy ? 'âœ… ãƒ€ãƒŸãƒ¼' : 'â• ãƒ€ãƒŸãƒ¼'}
                            </button>
                            <button class="btn ${ft.notifyEmail ? 'btn-success' : 'btn-secondary'}" 
                                    onclick="toggleNotify('${ft.id}', ${!!ft.notifyEmail})" 
                                    style="font-size: 12px; padding: 4px 8px;"
                                    title="${ft.notifyEmail ? 'ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ON' : 'ãƒ¡ãƒ¼ãƒ«é€šçŸ¥OFF'}">
                                ${ft.notifyEmail ? 'ğŸ”” ON' : 'ğŸ”• OFF'}
                            </button>
                            <button class="btn ${ft.isDummy ? 'btn-primary' : 'btn-warning'}" 
                                    onclick="loginAsFortuneTeller('${ft.id}', '${ft.name}')" 
                                    style="font-size: 12px; padding: 4px 8px; width: 100%;"
                                    title="${ft.isDummy ? 'ã“ã®å ã„å¸«ã¨ã—ã¦æ´»å‹•' : 'ãªã‚Šã™ã¾ã—ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆæ³¨æ„ï¼‰'}">
                                ${ft.isDummy ? 'âœ¨ ã“ã®å ã„å¸«ã§æ´»å‹•' : 'âš ï¸ ãªã‚Šã™ã¾ã—'}
                            </button>
                            <button class="btn ${ft.ratingFixed ? 'btn-danger' : 'btn-primary'}" onclick="fixRating('${ft.id}', ${ft.averageRating || 0}, ${!!ft.ratingFixed})" style="font-size: 12px; padding: 4px 8px;" title="${ft.ratingFixed ? 'è©•ä¾¡ã®å›ºå®šã‚’è§£é™¤ã—ã¾ã™' : 'è©•ä¾¡ã‚’å›ºå®šã—ã¾ã™'}">
                                ${ft.ratingFixed ? 'â­ è§£é™¤' : 'â­ å›ºå®š'}
                            </button>
                            <button class="btn btn-primary" onclick="showManageReviewCountModal('${ft.id}', '${ft.name || 'å ã„å¸«'}', ${ft.baseReviewCount || 0})" style="font-size: 12px; padding: 4px 8px;" title="é‘‘å®šæ•°ã®åŸºæº–å€¤ã‚’è¨­å®šã—ã¾ã™">
                                ğŸ”¢ é‘‘å®šæ•°
                            </button>
                            <button class="btn ${ft.fixedCommissionRate ? 'btn-danger' : 'btn-success'}" onclick="fixCommission('${ft.id}', ${commissionRate}, ${!!ft.fixedCommissionRate})" style="font-size: 12px; padding: 4px 8px;" title="${ft.fixedCommissionRate ? 'å ±é…¬ç‡ã®å›ºå®šã‚’è§£é™¤ã—ã¾ã™' : 'å ±é…¬ç‡ã‚’å›ºå®šã—ã¾ã™'}">
                                ${ft.fixedCommissionRate ? 'ğŸ’° è§£é™¤' : 'ğŸ’° å›ºå®š'}
                            </button>
                            <button class="btn btn-danger" onclick="deleteFortuneTeller('${ft.id}', '${ft.email || ''}')" style="font-size: 12px; padding: 4px 8px;" title="ã“ã®å ã„å¸«ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™(Firebaseèªè¨¼ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)">
                                ğŸ—‘ï¸ å‰Šé™¤
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);

                // ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºã‚‚å…ƒã®ã¾ã¾
                let statusTextCard = 'ä¸æ˜';
                let statusClass = 'inactive';
                if (ft.status === 'available') {
                    statusTextCard = 'âš¡ å¾…æ©Ÿä¸­';
                    statusClass = 'active';
                } else if (ft.status === 'accepting') {
                    statusTextCard = 'ğŸ“ å—ä»˜ä¸­';
                    statusClass = 'active';
                } else if (ft.status === 'stopped') {
                    statusTextCard = 'â¸ï¸ åœæ­¢ä¸­';
                    statusClass = 'inactive';
                }

                let commissionRateCard;
                if (ft.fixedCommissionRate) {
                    commissionRateCard = ft.fixedCommissionRate;
                } else {
                    const previousRevenue = ft.previousMonthRevenue || 0;
                    if (previousRevenue >= 270000) commissionRateCard = 40;
                    else if (previousRevenue >= 210000) commissionRateCard = 38;
                    else if (previousRevenue >= 150000) commissionRateCard = 36;
                    else if (previousRevenue >= 90000) commissionRateCard = 34;
                    else if (previousRevenue >= 30000) commissionRateCard = 32;
                    else commissionRateCard = 30;
                }

                const card = document.createElement('div');
                card.className = 'ft-card';
                card.innerHTML = `
                    <div class="ft-card-header">
                        <div>
                            <div class="ft-card-name">${ft.name || '-'}</div>
                            <div class="ft-card-email">${ft.email || '-'}</div>
                        </div>
                        <span class="ft-card-status ${statusClass}">${statusTextCard}</span>
                    </div>
                    <div class="ft-card-info">
                        <div class="ft-card-info-row">
                            <span class="ft-card-info-label">å°‚é–€åˆ†é‡</span>
                            <span class="ft-card-info-value">${ft.specialty || '-'}</span>
                        </div>
                        <div class="ft-card-info-row">
                            <span class="ft-card-info-label">æ–™é‡‘</span>
                            <span class="ft-card-info-value"><strong>${ft.price || 10}pt</strong>/æ–‡å­—</span>
                        </div>
                        <div class="ft-card-info-row">
                            <span class="ft-card-info-label">è©•ä¾¡</span>
                            <span class="ft-card-info-value">
                                <span class="star-display">â­ ${ft.averageRating || 0}</span>
                                ${ft.ratingFixed ? '<span class="fixed-badge">ğŸ”’ å›ºå®š</span>' : ''}
                            </span>
                        </div>
                        <div class="ft-card-info-row">
                            <span class="ft-card-info-label">å ±é…¬ç‡</span>
                            <span class="ft-card-info-value">
                                ${commissionRateCard}%
                                ${ft.fixedCommissionRate ? '<span class="fixed-badge">ğŸ”’ å›ºå®š</span>' : ''}
                            </span>
                        </div>
                    </div>
                    <div class="ft-card-actions">
                        <button class="btn btn-primary" onclick="editPrice('${ft.id}', '${ft.name}', ${ft.price || 10})" title="æ–™é‡‘ã‚’å¤‰æ›´" style="width: 100%; margin-bottom: 4px;">
                            ğŸ’° æ–™é‡‘å¤‰æ›´
                        </button>
                        <button class="btn ${ft.isDummy ? 'btn-success' : 'btn-secondary'}" onclick="toggleDummy('${ft.id}', ${!!ft.isDummy})" title="${ft.isDummy ? 'ãƒ€ãƒŸãƒ¼å ã„å¸«ã§ã™' : 'ãƒ€ãƒŸãƒ¼ã«è¨­å®š'}" style="flex: 1;">
                            ${ft.isDummy ? 'âœ… ãƒ€ãƒŸãƒ¼' : 'â• ãƒ€ãƒŸãƒ¼'}
                        </button>
                        <button class="btn ${ft.notifyEmail ? 'btn-success' : 'btn-secondary'}" onclick="toggleNotify('${ft.id}', ${!!ft.notifyEmail})" title="${ft.notifyEmail ? 'ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ON' : 'ãƒ¡ãƒ¼ãƒ«é€šçŸ¥OFF'}" style="flex: 1;">
                            ${ft.notifyEmail ? 'ğŸ”” ON' : 'ğŸ”• OFF'}
                        </button>
                        <button class="btn ${ft.isDummy ? 'btn-primary' : 'btn-warning'}" onclick="loginAsFortuneTeller('${ft.id}', '${ft.name}')" title="${ft.isDummy ? 'ã“ã®å ã„å¸«ã¨ã—ã¦æ´»å‹•' : 'ãªã‚Šã™ã¾ã—ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆæ³¨æ„ï¼‰'}" style="width: 100%; margin-top: 4px;">
                            ${ft.isDummy ? 'âœ¨ ã“ã®å ã„å¸«ã§æ´»å‹•' : 'âš ï¸ ãªã‚Šã™ã¾ã—'}
                        </button>
                        <button class="btn ${ft.ratingFixed ? 'btn-danger' : 'btn-primary'}" onclick="fixRating('${ft.id}', ${ft.averageRating || 0}, ${!!ft.ratingFixed})" title="${ft.ratingFixed ? 'è©•ä¾¡ã®å›ºå®šã‚’è§£é™¤' : 'è©•ä¾¡ã‚’å›ºå®š'}">
                            ${ft.ratingFixed ? 'â­ è§£é™¤' : 'â­ å›ºå®š'}
                        </button>
                        <button class="btn ${ft.fixedCommissionRate ? 'btn-danger' : 'btn-success'}" onclick="fixCommission('${ft.id}', ${commissionRateCard}, ${!!ft.fixedCommissionRate})" title="${ft.fixedCommissionRate ? 'å ±é…¬ç‡ã®å›ºå®šã‚’è§£é™¤' : 'å ±é…¬ç‡ã‚’å›ºå®š'}">
                            ${ft.fixedCommissionRate ? 'ğŸ’° è§£é™¤' : 'ğŸ’° å›ºå®š'}
                        </button>
                        <button class="btn btn-danger" onclick="deleteFortuneTeller('${ft.id}', '${ft.email || ''}')" title="ã“ã®å ã„å¸«ã‚’å®Œå…¨ã«å‰Šé™¤">
                            ğŸ—‘ï¸ å‰Šé™¤
                        </button>
                    </div>
                `;
                cardsGrid.appendChild(card);
            });
        }

        // ä»¥ä¸‹ã€å…ƒã®ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒã‚¤ãƒ³ãƒˆè¿½åŠ ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãƒ€ãƒŸãƒ¼ç®¡ç†ãªã©ï¼‰ã¯ãã®ã¾ã¾
        // â€¦â€¦ï¼ˆé•·ã„ã®ã§çœç•¥ã›ãšã€ã“ã®ã‚ã¨å…¨éƒ¨å…ƒã®ã‚³ãƒ¼ãƒ‰ãŒç¶šãï¼‰

        // â˜…â˜…â˜… ã“ã®ä¸‹ã¯ã€ã—ã‚‡ãƒ¼ã¡ã‚ƒã‚“ãŒå‰ã«è²¼ã£ã¦ãã‚ŒãŸ admin ã‚³ãƒ¼ãƒ‰ã®ç¶šãã¨åŒã˜ â˜…â˜…â˜…
        // ï¼ˆæ–‡å­—æ•°ã®éƒ½åˆã§ä¸€éƒ¨çœç•¥ã—ãŸããªã‚‹ã‘ã©ã€ã“ã“ã¯å…¨éƒ¨æ®‹ã•ãªã„ã¨å‹•ã‹ãªã„ã®ã§ã€
        //  å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã€Œ// è©•ä¾¡å›ºå®š/è§£é™¤ã€ä»¥é™ã‚’ä¸¸ã”ã¨ã“ã®ä½ç½®ã«è²¼ã£ã¦ä½¿ã£ã¦ã­ï¼‰

    </script>

    <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <!-- ï¼ˆã“ã“ã‹ã‚‰ä¸‹ã®ãƒ¢ãƒ¼ãƒ€ãƒ«é¡ã¯ã€å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãªã®ã§ãã®ã¾ã¾ã‚³ãƒ”ãƒšã§OKï¼‰ -->
    <!-- ... æ—¢å­˜ã® addReviewModal / manageReviewCountModal / dummyClientsModal ã®HTML ... -->

</body>
</html>
